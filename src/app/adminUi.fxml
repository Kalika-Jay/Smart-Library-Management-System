<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<?import javafx.scene.control.PasswordField?>
<AnchorPane prefHeight="600.0" prefWidth="800.0" style="-fx-background-color: linear-gradient(to bottom, #f8f9fa, #e9ecef);" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="app.UIController">
    <children>

        <!-- Header Section -->
        <VBox layoutX="0.0" layoutY="0.0" prefHeight="80.0" prefWidth="800.0" style="-fx-background-color: linear-gradient(to right, #081e62, #c2bdbd); -fx-padding: 15;">
            <children>
                <Label alignment="CENTER" prefWidth="770.0" text="Library Management System" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="28.0" />
                    </font>
                </Label>
                <Label alignment="CENTER" prefWidth="770.0" text="Manage Books, Students, and Librarians" textFill="#f8f9fa">
                    <font>
                        <Font size="14.0" />
                    </font>
                </Label>
            </children>
        </VBox>

        <!-- Main Content Area -->
        <VBox layoutX="30.0" layoutY="100.0" prefHeight="480.0" prefWidth="740.0" spacing="20.0">
            <children>

                <!-- Action Buttons Section -->
                <VBox spacing="15.0">
                    <children>
                        <Label text="Quick Actions" textFill="#495057">
                            <font>
                                <Font name="System Bold" size="18.0" />
                            </font>
                        </Label>

                        <!-- View Buttons Row -->
                        <HBox spacing="15.0">
                            <children>
                                <Button onAction="#getAllUsers" prefHeight="45.0" prefWidth="120.0"
                                        style="-fx-background-color: linear-gradient(to bottom, #28a745, #20c997);
                                       -fx-text-fill: white; -fx-background-radius: 12; -fx-cursor: hand;
                                       -fx-font-size: 14px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);"
                                        text="Show Users" />

                                <Button onAction="#getAllBooks" prefHeight="45.0" prefWidth="120.0"
                                        style="-fx-background-color: linear-gradient(to bottom, #007bff, #0056b3);
                                       -fx-text-fill: white; -fx-background-radius: 12; -fx-cursor: hand;
                                       -fx-font-size: 14px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);"
                                        text="Show Books" />
                            </children>
                        </HBox>

                        <Separator prefWidth="200.0" />

                        <Label text="Management Tools" textFill="#495057">
                            <font>
                                <Font name="System Bold" size="18.0" />
                            </font>
                        </Label>

                        <!-- Toggle Buttons Row -->
                        <HBox spacing="15.0">
                            <children>
                                <Button fx:id="toggleButton1" onAction="#toggleArea1" prefHeight="45.0" prefWidth="140.0"
                                        style="-fx-background-color: linear-gradient(to bottom, #ff6b6b, #ee5a52);
                                       -fx-text-fill: white; -fx-background-radius: 12; -fx-cursor: hand;
                                       -fx-font-size: 13px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);"
                                        text="Search by Author" />

                                <Button fx:id="toggleButton2" onAction="#toggleAddBookArea" prefHeight="45.0" prefWidth="120.0"
                                        style="-fx-background-color: linear-gradient(to bottom, #4ecdc4, #44a08d);
                                       -fx-text-fill: white; -fx-background-radius: 12; -fx-cursor: hand;
                                       -fx-font-size: 13px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);"
                                        text="Add Book" />
                                <Button fx:id="toggleButton3" onAction="#toggleAddStudentArea" prefHeight="45.0" prefWidth="120.0"
                                        style="-fx-background-color: linear-gradient(to bottom, #ffa726, #fb8c00);
                                       -fx-text-fill: white; -fx-background-radius: 12; -fx-cursor: hand;
                                       -fx-font-size: 13px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);"
                                        text="Add Student" />

                                <Button fx:id="toggleButton4" onAction="#toggleAddLibrarianArea" prefHeight="45.0" prefWidth="130.0"
                                        style="-fx-background-color: linear-gradient(to bottom, #ab47bc, #8e24aa);
                                       -fx-text-fill: white; -fx-background-radius: 12; -fx-cursor: hand;
                                       -fx-font-size: 13px; -fx-font-weight: bold; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 4, 0, 0, 2);"
                                        text="Add Librarian" />
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <!-- Dynamic Content Area -->
                <VBox prefHeight="280.0" prefWidth="740.0" spacing="10.0">
                    <children>

                        <!-- Search by Author Area -->
                        <AnchorPane fx:id="hiddenArea1" managed="false" prefHeight="160.0" prefWidth="740.0"
                                    style="-fx-background-color: #ffffff; -fx-background-radius: 15;
                                    -fx-border-color: #e9ecef; -fx-border-radius: 15; -fx-border-width: 2;
                                    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 3);"
                                    visible="false">
                            <children>
                                <VBox layoutX="30.0" layoutY="20.0" prefWidth="680.0" spacing="15.0">
                                    <children>
                                        <Label text="ðŸ” Search Books by Author" textFill="#495057">
                                            <font>
                                                <Font name="System Bold" size="20.0" />
                                            </font>
                                        </Label>

                                        <TextField fx:id="authorField" prefHeight="45.0" prefWidth="680.0"
                                                   promptText="Enter author name or keyword..."
                                                   style="-fx-background-color: #f8f9fa; -fx-background-radius: 10;
                                               -fx-border-color: #dee2e6; -fx-border-radius: 10; -fx-border-width: 1;
                                               -fx-padding: 12; -fx-font-size: 14px;" />

                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <Button onAction="#onSearchClicked" prefHeight="40.0" prefWidth="100.0"
                                                        style="-fx-background-color: linear-gradient(to bottom, #6c5ce7, #5f3dc4);
                                                  -fx-text-fill: white; -fx-background-radius: 10; -fx-cursor: hand;
                                                  -fx-font-size: 14px; -fx-font-weight: bold;"
                                                        text="Search" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </AnchorPane>

                        <!-- Add Book Area -->
                        <AnchorPane fx:id="hiddenArea2" managed="false" prefHeight="200.0" prefWidth="740.0"
                                    style="-fx-background-color: #ffffff; -fx-background-radius: 15;
                                    -fx-border-color: #e9ecef; -fx-border-radius: 15; -fx-border-width: 2;
                                    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 3);"
                                    visible="false">
                            <children>
                                <VBox layoutX="30.0" layoutY="20.0" prefWidth="680.0" spacing="12.0">
                                    <children>
                                        <Label text="ðŸ“š Add New Book" textFill="#495057">
                                            <font>
                                                <Font name="System Bold" size="20.0" />
                                            </font>
                                        </Label>

                                        <HBox spacing="15.0">
                                            <children>
                                                <TextField fx:id="idField" prefHeight="40.0" prefWidth="150.0"
                                                           promptText="Book ID"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />

                                                <TextField fx:id="titleField" prefHeight="40.0" prefWidth="300.0"
                                                           promptText="Book Title"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />

                                                <TextField fx:id="authorField2" prefHeight="40.0" prefWidth="200.0"
                                                           promptText="Author Name"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />
                                            </children>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <Button onAction="#onAddBookClicked" prefHeight="40.0" prefWidth="100.0"
                                                        style="-fx-background-color: linear-gradient(to bottom, #00b894, #00a085);
                                                  -fx-text-fill: white; -fx-background-radius: 10; -fx-cursor: hand;
                                                  -fx-font-size: 14px; -fx-font-weight: bold;"
                                                        text="Add Book" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </AnchorPane>
                        <!-- Add Student Area -->
                        <AnchorPane fx:id="hiddenArea3" managed="false" prefHeight="160.0" prefWidth="740.0"
                                    style="-fx-background-color: #ffffff; -fx-background-radius: 15;
                                    -fx-border-color: #e9ecef; -fx-border-radius: 15; -fx-border-width: 2;
                                    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 3);"
                                    visible="false">
                            <children>
                                <VBox layoutX="30.0" layoutY="20.0" prefWidth="680.0" spacing="15.0">
                                    <children>
                                        <Label text="ðŸ‘¨â€ðŸŽ“ Add New Student" textFill="#495057">
                                            <font>
                                                <Font name="System Bold" size="20.0" />
                                            </font>
                                        </Label>

                                        <HBox spacing="15.0">
                                            <children>
                                                <TextField fx:id="uidFieldS" prefHeight="40.0" prefWidth="150.0"
                                                           promptText="Student ID"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />

                                                <TextField fx:id="nameFieldS" prefHeight="40.0" prefWidth="300.0"
                                                           promptText="Student Name"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />
                                            </children>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <Button onAction="#onAddStudentClicked" prefHeight="40.0" prefWidth="120.0"
                                                        style="-fx-background-color: linear-gradient(to bottom, #fdcb6e, #e17055);
                                                  -fx-text-fill: white; -fx-background-radius: 10; -fx-cursor: hand;
                                                  -fx-font-size: 14px; -fx-font-weight: bold;"
                                                        text="Add Student" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </AnchorPane>

                        <!-- Add Librarian Area -->
                        <AnchorPane fx:id="hiddenArea4" managed="false" prefHeight="160.0" prefWidth="740.0"
                                    style="-fx-background-color: #ffffff; -fx-background-radius: 15;
                                    -fx-border-color: #e9ecef; -fx-border-radius: 15; -fx-border-width: 2;
                                    -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 3);"
                                    visible="false">
                            <children>
                                <VBox layoutX="30.0" layoutY="20.0" prefWidth="680.0" spacing="15.0">
                                    <children>
                                        <Label text="ðŸ‘©â€ðŸ’¼ Add New Librarian" textFill="#495057">
                                            <font>
                                                <Font name="System Bold" size="20.0" />
                                            </font>
                                        </Label>

                                        <HBox spacing="15.0">
                                            <children>
                                                <TextField fx:id="nameFieldL" prefHeight="40.0" prefWidth="150.0"
                                                           promptText="Librarian ID"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />

                                                <TextField fx:id="userNameFieldL" prefHeight="40.0" prefWidth="300.0"
                                                           promptText="Librarian Name"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />
                                                <PasswordField fx:id="passwordFieldL" prefHeight="40.0" prefWidth="300.0"
                                                           promptText="Librarian Name"
                                                           style="-fx-background-color: #f8f9fa; -fx-background-radius: 8;
                                                     -fx-border-color: #dee2e6; -fx-border-radius: 8; -fx-border-width: 1;
                                                     -fx-padding: 10; -fx-font-size: 13px;" />
                                            </children>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <Button onAction="#onAddLibrarianClicked" prefHeight="40.0" prefWidth="130.0"
                                                        style="-fx-background-color: linear-gradient(to bottom, #a29bfe, #6c5ce7);
                                                  -fx-text-fill: white; -fx-background-radius: 10; -fx-cursor: hand;
                                                  -fx-font-size: 14px; -fx-font-weight: bold;"
                                                        text="Add Librarian" />
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </AnchorPane>

                        <!-- Results List -->
                        <ListView fx:id="resultsList" managed="false" prefHeight="200.0" prefWidth="740.0"
                                  style="-fx-background-color: #ffffff; -fx-background-radius: 15;
                                  -fx-border-color: #e9ecef; -fx-border-radius: 15; -fx-border-width: 2;
                                  -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 3);
                                  -fx-font-size: 14px;"
                                  visible="false" />
                    </children>
                </VBox>
            </children>
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
        </VBox>
    </children>
    <Label fx:id="welcomeLabel" layoutX="30.0" layoutY="50.0" textFill="WHITE">
        <font>
            <Font name="System Bold" size="16.0" />
        </font>
    </Label>
    <Button fx:id="logOutButton" layoutX="650.0" layoutY="45.0" onAction="#onClickLogOut"
            prefHeight="35.0" prefWidth="120.0" text="Log Out"
            style="-fx-background-color: linear-gradient(to bottom, #e74c3c, #c0392b);
               -fx-text-fill: white; -fx-background-radius: 8; -fx-cursor: hand;
               -fx-font-size: 14px; -fx-font-weight: bold;
               -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 3, 0, 0, 1);" />
</AnchorPane>